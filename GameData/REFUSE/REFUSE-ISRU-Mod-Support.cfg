//
// All configuration related to ISRU content
//

//
// Global settings
//

//
// Kerbalism / ProfileDefault 
// MonoPropellant -> HTP
// LiquidFuel -> Kerosene
// Oxidizer -> LqdOxygen
//
// ============================================================================
// Add resources and processes to the KerbalismSupport profile
// ============================================================================ 
//

@Profile[default]:NEEDS[Kerbalism]:FOR[ZZZ_REFUSE]
{
	!Process:HAS[#modifier[_MonopropFuelCell]] { }
	!Process:HAS[#modifier[_Sabatier]] { }
	!Process:HAS[#modifier[_Anthraquinone]] { }
	!Process:HAS[#modifier[_HydrazineProduction]] { }
	!Process:HAS[#modifier[_NitroHydrazine]] { }
}


Profile:NEEDS[Kerbalism,ProfileDefault]
{
    name = KerbalismSupport

    modname = REFUSE
    moddir = REFUSE

	Process
	{
		name = monoprop fuel cell
		title = monoprop fuel cell
		modifier = _MonopropFuelCell
		input = Oxygen@0.510619148925
		input = HTP@0.000901270123875
		output = Nitrogen@0.5038381295
		output = Water@0.0008106876
		output = ElectricCharge@0.1
		dump_valve = Nitrogen,Water,Nitrogen&Water
	}
	Process
	{
		name = sabatier process
		title = sabatier process
		modifier = _Sabatier
		input = ElectricCharge@0.008082126
		input = CarbonDioxide@3.490273221
		input = Hydrogen@13.87826691
		output = Water@0.005574954
		output = Kerosene@0.000496445
		dump_valve = Water,Kerosene
	}
	Process
	{
		name = anthraquinone process
		title = anthraquinone process
		modifier = _Anthraquinone
		input = Oxygen@2.0241355411
		output = LqdOxygen@0.0006067662
	}
	Process
	{
		name = hydrazine production
		title = hydrazine production
		modifier = _HydrazineProduction
		input = ElectricCharge@0.023871584
		input = Ammonia@4.7203389609
		input = LqdOxygen@0.0014500000
		output = Water@0.0057597534
		output = Oxygen@1.2092781475
		output = HTP@0.0008537763
		dump_valve = Water,Oxygen,HTP,Water&Oxygen,Water&HTP,Oxygen&HTP
	}
	Process
	{
		name = hydrazine production N2 injection
		title = hydrazine production N2 injection
		modifier = _NitroHydrazine
		input = ElectricCharge@0.059678961
		input = Ammonia@4.7203389609
		input = LqdOxygen@0.0014500000
		input = Nitrogen@3.5796568216
		output = Oxygen@4.8371125902
		output = HTP@0.0021344406
		dump_valve = Oxygen,HTP
	}
  }
}

@PART[*]:HAS[@MODULE[Configure]]:NEEDS[Kerbalism]:FOR[ZZZ_REFUSE]
{
	@MODULE[Configure],*
	{
		@desc ^= :monopropellant:HTP:
		@desc ^= :liquidfuel:Kerosene:
		@desc ^= :oxidizer:LqdOxygen:
	}
  }
}

//
// InterstellarResourceConverter
//
@PART[*]:HAS[@MODULE[InterstellarResourceConverter]]:NEEDS[InterstellarFuelSwitch]:FOR[ZZZ_REFUSE]
{
	@MODULE[InterstellarResourceConverter],*
	{
		@primaryResourceNames ^= :monopropellant:HTP:
		@primaryResourceNames ^= :liquidfuel:Kerosene:
		@primaryResourceNames ^= :oxidizer:LqdOxygen:
		@secondaryResourceNames ^= :monopropellant:HTP:
		@secondaryResourceNames ^= :liquidfuel:Kerosene:
		@secondaryResourceNames ^= :oxidizer:LqdOxygen:
	}
  }
}

// does not work as intended - and does not throw MM error as well
@Localization:FOR[ZZZ_REFUSE]
{
	*
	{
		*,* ^= :monopropellant:HTP:
		*,* ^= :liquidfuel:Kerosene:
		*,* ^= :oxidizer:LqdOxygen:
	}
}
